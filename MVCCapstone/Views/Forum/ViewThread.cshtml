@model MVCCapstone.Models.PostModel
@using System.Web.Security;
@{
    ViewBag.Title = "View Thread";
}
<div class="row">
    @Html.RouteLink("Back To Thread", new { controller = "forum", action = "thread", bookid = Model.bookId }, new { @class = "btn btn-default" })
</div>

<div class="row">
    <div class="col-sm-12">
        <h2>@Model.threadTitle</h2>
    </div>
</div>

<br />

<div class="row">
    <div class="col-sm-12">
    @foreach (MVCCapstone.Models.PostViewModel post in Model.postList)
    {
        <div class="row panel panel-default">

            <div class="col-sm-12 panel panel-primary">
                Posted: @post.datePosted.ToShortDateString() &nbsp; @post.datePosted.ToLongTimeString()
            </div>

            <div class="col-sm-3 panel-primary">
                <p>
                    <strong>@post.userName</strong> 
                    @if(Roles.IsUserInRole(@post.userName,"admin"))
                    { 
                        <span style="color:red">[ A ]</span>
                    }
                    <br />
                    Member Since: @post.memberSince.ToShortDateString() <br />
                    Total Posts: @post.totalPost 
                </p>
            </div>
            <div class="col-sm-9">
                <span style="white-space: pre-line">@post.postContent</span>
            </div>
         
            <div style="border-radius: 4px; border :1px solid #428bca" class="col-sm-12">
                <span class="pull-right">Reply
                    @if (User.IsInRole("admin") || User.Identity.Name == post.userName)
                    {
                        @: Edit
                    }
                </span>
            </div>
        </div>
        
    }
    </div>
</div>

<div class="row">

   @Html.ActionLink("Create Post","post", new {threadid = Model.threadId}, new {@class = " btn btn-primary"})

    <div class="pull-right">
        PAGINATION
    </div>
</div>



